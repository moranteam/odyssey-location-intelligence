<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odyssey AI | Employee Profile Analyzer</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
            background: #f5f5f7;
            color: #1d1d1f;
            padding: 40px 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 48px;
        }

        .header h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #0071e3 0%, #5856d6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            font-size: 18px;
            color: #6e6e73;
        }

        .profile-selector {
            background: white;
            padding: 32px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            margin-bottom: 32px;
        }

        .profile-selector h2 {
            font-size: 24px;
            margin-bottom: 24px;
            color: #1d1d1f;
        }

        .selector-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        .selector-group {
            background: #f5f5f7;
            padding: 20px;
            border-radius: 12px;
        }

        .selector-group h3 {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #86868b;
            margin-bottom: 12px;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .radio-option:hover {
            border-color: #0071e3;
        }

        .radio-option input[type="radio"] {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            accent-color: #0071e3;
        }

        .radio-option label {
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
        }

        .recommendation {
            background: linear-gradient(135deg, #34c759 0%, #30d158 100%);
            color: white;
            padding: 32px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(52, 199, 89, 0.3);
            margin-bottom: 32px;
            text-align: center;
        }

        .recommendation h2 {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .recommendation p {
            font-size: 16px;
            opacity: 0.95;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }

        .location-card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .location-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        }

        .location-card.recommended {
            border: 3px solid #34c759;
            box-shadow: 0 8px 24px rgba(52, 199, 89, 0.2);
        }

        .location-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .location-name {
            font-size: 24px;
            font-weight: 700;
            color: #1d1d1f;
        }

        .score-badge {
            background: linear-gradient(135deg, #0071e3 0%, #5856d6 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 700;
        }

        .score-badge.top {
            background: linear-gradient(135deg, #34c759 0%, #30d158 100%);
        }

        .cost-summary {
            background: #f5f5f7;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .cost-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .cost-row:last-child {
            margin-bottom: 0;
            padding-top: 8px;
            border-top: 2px solid #d1d1d6;
            font-weight: 600;
            font-size: 16px;
        }

        .cost-label {
            color: #6e6e73;
        }

        .cost-value {
            font-weight: 600;
            color: #1d1d1f;
        }

        .pros-cons {
            margin-bottom: 20px;
        }

        .pros-cons h4 {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #86868b;
            margin-bottom: 8px;
        }

        .pros-cons ul {
            list-style: none;
            font-size: 13px;
            line-height: 1.6;
        }

        .pros-cons li {
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
        }

        .pros-cons li:before {
            position: absolute;
            left: 0;
            font-weight: 700;
        }

        .pros li:before {
            content: "‚úì";
            color: #34c759;
        }

        .cons li:before {
            content: "‚úó";
            color: #ff3b30;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .metric-item {
            background: #f5f5f7;
            padding: 12px;
            border-radius: 8px;
        }

        .metric-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #86868b;
            margin-bottom: 4px;
        }

        .metric-value {
            font-size: 18px;
            font-weight: 700;
            color: #1d1d1f;
        }

        .export-btn {
            width: 100%;
            padding: 16px;
            background: #0071e3;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 32px;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s ease;
        }

        .export-btn:hover {
            background: #0077ed;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 113, 227, 0.3);
        }

        @media (max-width: 1200px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .selector-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Employee Profile Analyzer</h1>
            <p>Personalized location recommendations based on your team's profile</p>
        </div>

        <div class="profile-selector">
            <h2>Configure Employee Profile</h2>
            <div class="selector-grid">
                <div class="selector-group">
                    <h3>Family Status</h3>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="family" value="single" id="single" checked>
                            <label for="single">Single Professional</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="family" value="couple" id="couple">
                            <label for="couple">Couple (No Kids)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="family" value="family" id="family">
                            <label for="family">Family (1+ Kids)</label>
                        </div>
                    </div>
                </div>

                <div class="selector-group">
                    <h3>Transportation</h3>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="transport" value="transit" id="transit" checked>
                            <label for="transit">Transit Only</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="transport" value="car" id="car">
                            <label for="car">Car Owner</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="transport" value="hybrid" id="hybrid">
                            <label for="hybrid">Hybrid (Both)</label>
                        </div>
                    </div>
                </div>

                <div class="selector-group">
                    <h3>Work Schedule</h3>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="schedule" value="flexible" id="flexible" checked>
                            <label for="flexible">Flexible (9:30-4:00)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="schedule" value="fixed" id="fixed">
                            <label for="fixed">Fixed (8:00-6:00)</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="recommendation" id="recommendation">
            <h2>üèÜ Recommended: Redwood City</h2>
            <p>Best overall match for your profile with optimal cost, quality of life, and convenience</p>
        </div>

        <div class="comparison-grid" id="comparison-grid">
            <!-- Location cards populated by JavaScript -->
        </div>

        <button class="export-btn" id="export-btn">üìä Export Profile Analysis to CSV</button>
    </div>

    <script>
        const LOCATIONS = {
            rwc: {
                name: 'Redwood City',
                housing: { single: 2800, couple: 3400, family: 4200 },
                childcare: 2200,
                parking: 125,
                commute: { flexible: 35, fixed: 58 },
                schools: 8,
                parkingAvail: 850,
                color: '#34c759'
            },
            mp: {
                name: 'Menlo Park',
                housing: { single: 3200, couple: 3900, family: 4900 },
                childcare: 2400,
                parking: 180,
                commute: { flexible: 38, fixed: 62 },
                schools: 9,
                parkingAvail: 420,
                color: '#5856d6'
            },
            pa: {
                name: 'Palo Alto',
                housing: { single: 3600, couple: 4400, family: 5800 },
                childcare: 2600,
                parking: 275,
                commute: { flexible: 42, fixed: 68 },
                schools: 10,
                parkingAvail: 320,
                color: '#0071e3'
            }
        };

        const TRANSIT_COST = 273;

        function calculateCosts(location, profile) {
            let housingCost = location.housing[profile.family];
            let childcareCost = profile.family === 'family' ? location.childcare : 0;
            let commuteCost = 0;

            if (profile.transport === 'transit') {
                commuteCost = TRANSIT_COST;
            } else if (profile.transport === 'car') {
                // Gas + parking + maintenance + insurance + depreciation
                commuteCost = 180 + location.parking + 126 + 85 + 105;
            } else { // hybrid
                commuteCost = TRANSIT_COST + (location.parking / 2);
            }

            let totalMonthlyCost = housingCost + childcareCost + commuteCost;
            let totalAnnualCost = totalMonthlyCost * 12;

            return {
                housing: housingCost,
                childcare: childcareCost,
                commute: commuteCost,
                monthly: totalMonthlyCost,
                annual: totalAnnualCost
            };
        }

        function calculateQoL(location, profile) {
            let score = 100;

            // Commute time factor (0-30 points)
            let commuteTime = location.commute[profile.schedule];
            score -= Math.max(0, (commuteTime - 30) * 0.5);

            // School rating (if family)
            if (profile.family === 'family') {
                score += (location.schools - 5) * 3;
            }

            // Schedule flexibility bonus
            if (profile.schedule === 'flexible') {
                score += 10;
            }

            // Parking availability
            if (profile.transport === 'car' || profile.transport === 'hybrid') {
                if (location.parkingAvail > 600) score += 8;
                else if (location.parkingAvail > 400) score += 5;
                else score += 2;
            }

            return Math.min(100, Math.max(0, Math.round(score)));
        }

        function getScore(location, profile) {
            const costs = calculateCosts(location, profile);
            const qol = calculateQoL(location, profile);

            // Normalize costs (lower is better)
            const costScore = Math.max(0, 100 - (costs.monthly / 100));

            // Weighted: 40% cost, 40% QoL, 20% convenience
            const convenience = location.parkingAvail / 10;
            const totalScore = (costScore * 0.4) + (qol * 0.4) + (convenience * 0.2);

            return Math.round(totalScore);
        }

        function getProsConsFixed(locationKey, profile) {
            const prosCons = {
                rwc: {
                    pros: [
                        'Most affordable housing',
                        'Excellent parking availability',
                        'Fastest Caltrain express (35 min)',
                        'Best cost-to-value ratio'
                    ],
                    cons: [
                        'Lower school ratings vs Palo Alto',
                        'Less walkable downtown'
                    ]
                },
                mp: {
                    pros: [
                        'Great schools (9/10)',
                        'Walkable downtown',
                        'Moderate parking costs',
                        'Strong community feel'
                    ],
                    cons: [
                        'Higher housing costs than RWC',
                        'Limited parking spots'
                    ]
                },
                pa: {
                    pros: [
                        'Top-rated schools (10/10)',
                        'Premium downtown area',
                        'Strong tech ecosystem',
                        'Best resale value'
                    ],
                    cons: [
                        'Highest housing costs',
                        'Expensive parking ($275/mo)',
                        'Longest commutes',
                        'Very limited parking'
                    ]
                }
            };

            return prosCons[locationKey];
        }

        function updateComparison() {
            const profile = {
                family: document.querySelector('input[name="family"]:checked').value,
                transport: document.querySelector('input[name="transport"]:checked').value,
                schedule: document.querySelector('input[name="schedule"]:checked').value
            };

            const grid = document.getElementById('comparison-grid');
            grid.innerHTML = '';

            let topLocation = null;
            let topScore = 0;

            Object.keys(LOCATIONS).forEach(key => {
                const location = LOCATIONS[key];
                const costs = calculateCosts(location, profile);
                const qol = calculateQoL(location, profile);
                const score = getScore(location, profile);
                const proscons = getProsConsFixed(key, profile);

                if (score > topScore) {
                    topScore = score;
                    topLocation = location.name;
                }

                const card = document.createElement('div');
                card.className = 'location-card';
                if (score === topScore && score > 0) {
                    card.classList.add('recommended');
                }

                card.innerHTML = `
                    <div class="location-header">
                        <div class="location-name">${location.name}</div>
                        <div class="score-badge ${score === topScore ? 'top' : ''}">${score}/100</div>
                    </div>

                    <div class="cost-summary">
                        <div class="cost-row">
                            <span class="cost-label">Housing</span>
                            <span class="cost-value">$${costs.housing.toLocaleString()}/mo</span>
                        </div>
                        ${costs.childcare > 0 ? `
                        <div class="cost-row">
                            <span class="cost-label">Childcare</span>
                            <span class="cost-value">$${costs.childcare.toLocaleString()}/mo</span>
                        </div>` : ''}
                        <div class="cost-row">
                            <span class="cost-label">Commute</span>
                            <span class="cost-value">$${costs.commute.toLocaleString()}/mo</span>
                        </div>
                        <div class="cost-row">
                            <span class="cost-label">Total Monthly</span>
                            <span class="cost-value">$${costs.monthly.toLocaleString()}</span>
                        </div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-label">Annual Cost</div>
                            <div class="metric-value">$${(costs.annual / 1000).toFixed(0)}k</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-label">Quality of Life</div>
                            <div class="metric-value">${qol}/100</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-label">Commute Time</div>
                            <div class="metric-value">${location.commute[profile.schedule]} min</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-label">Parking Spaces</div>
                            <div class="metric-value">${location.parkingAvail}</div>
                        </div>
                    </div>

                    <div class="pros-cons">
                        <h4>Pros</h4>
                        <ul class="pros">
                            ${proscons.pros.map(pro => `<li>${pro}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="pros-cons">
                        <h4>Cons</h4>
                        <ul class="cons">
                            ${proscons.cons.map(con => `<li>${con}</li>`).join('')}
                        </ul>
                    </div>
                `;

                grid.appendChild(card);
            });

            // Update recommendation
            document.getElementById('recommendation').innerHTML = `
                <h2>üèÜ Recommended: ${topLocation}</h2>
                <p>Best overall match for your profile with optimal cost, quality of life, and convenience</p>
            `;
        }

        // Event listeners
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', updateComparison);
        });

        document.getElementById('export-btn').addEventListener('click', () => {
            const profile = {
                family: document.querySelector('input[name="family"]:checked').value,
                transport: document.querySelector('input[name="transport"]:checked').value,
                schedule: document.querySelector('input[name="schedule"]:checked').value
            };

            const csv = [
                ['Odyssey AI - Employee Profile Analysis'],
                ['Generated: ' + new Date().toLocaleString()],
                [''],
                ['Profile Configuration'],
                ['Family Status', profile.family],
                ['Transportation', profile.transport],
                ['Work Schedule', profile.schedule],
                [''],
                ['Location Comparison'],
                ['Location', 'Monthly Cost', 'Annual Cost', 'QoL Score', 'Overall Score', 'Commute Time']
            ];

            Object.keys(LOCATIONS).forEach(key => {
                const location = LOCATIONS[key];
                const costs = calculateCosts(location, profile);
                const qol = calculateQoL(location, profile);
                const score = getScore(location, profile);

                csv.push([
                    location.name,
                    '$' + costs.monthly.toLocaleString(),
                    '$' + costs.annual.toLocaleString(),
                    qol + '/100',
                    score + '/100',
                    location.commute[profile.schedule] + ' min'
                ]);
            });

            const csvContent = csv.map(row => row.join(',')).join('\n');
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'odyssey-profile-analysis-' + Date.now() + '.csv';
            a.click();
        });

        // Initialize
        updateComparison();
    </script>
</body>
</html>